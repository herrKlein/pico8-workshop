pico-8 cartridge // http://www.pico-8.com
version 39
__lua__

-- flap the bird
-- reset velocity

grav = 0.28 -- 1. adapt to game gravity
flap = 1
nrg = 50
fri = 3
ground = 128-20
map_speed = 0.5

function _init()
 plr = {
  pos={x=30, y=10},
  move = {
   vy = 0,
   bounce = -1
  }
 }
	map_x = 0
end

function _update60()
 if btn(4) and nrg > 0 then 
  plr.pos.y -= flap
  plr.move.vy = 0
  nrg -= 1
 else
  plr.move.vy += grav
  plr.pos.y += plr.move.vy
  if plr.pos.y > ground then
   plr.move.vy *= plr.move.bounce
   plr.pos.y = ground
   
   -- detect which tile
   -- to decide to adapt nrg or vel
   local xtile = abs((map_x-plr.pos.x)/1024*128)
   local flagtile = fget(mget(xtile, 15))
   if flagtile == 2 then
    plr.move.vy += fri -- apply friction
   elseif flagtile == 1 then
    plr.move.vy -= 2 -- extra bounce
   end
   
   nrg = 50
  end
 end
 map_x -= map_speed
end

function _draw()
 cls()

 print(map_x, 10,0,4)

 -- print(nrg,0,0,3)
 -- local xtile = abs(flr(map_x/1024*128))
 -- print(xtile .. "," .. fget(mget(xtile, 15)))
 map(0, 0, map_x, 0, 128, 16)
 spr(1, plr.pos.x, plr.pos.y, 2, 2)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000aaaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000099aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009aaaaaaaa1aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009aaaaaaaaaa88000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000009aaaadaaaaa888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000009aaadaadaaaaa8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000009daaddd9aaaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009da999aaaaad0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009ddaaaaaadd90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000099dddddd9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000009999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb0000000033333333000000e88820000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb000000003333333300000e888882000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb00000000333333330000e8800888200000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb0000000033333333000e88000088820000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb0000000033333333000e80000008820000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbb0000000033333333000e80000008820000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000044444444000000004444444400e880000008882000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000044444444000000004444444400e800000000882000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000e800000000882000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000008800000000882000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088800000000888200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088000000000088200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088800000000888200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000008800000000e82000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000008800000000e82000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000008800000000e82000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000888000000e882000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000088000000e820000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000088000000e820000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000008880000e8820000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000088800e88200000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000888e882000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000888820000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000444500000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000545500000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000646500000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000747500000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4343434343434343414141434343434343434341414141414343434343434343434343434343414143434343434343434343434343414141414141414343434343434343434343434343434141434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343
4040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
